cmake_minimum_required(VERSION 3.17)
project(mainrelay C)

set(CMAKE_C_STANDARD 99)

link_libraries(rt)
link_libraries(nsl)
link_libraries(resolv)
link_libraries(pthread)
link_libraries(crypto)
link_libraries(ssl)
link_libraries(event_core)
link_libraries(event_extra)
link_libraries(event_openssl)
link_libraries(event_pthreads)
link_libraries(hiredis)
#LINK_DIRECTORIES(so)
add_executable(mainrelay mainrelay.c src/mainrelay.h src/dbdrivers/dbd_mongo.c src/dbdrivers/dbd_mongo.h src/dbdrivers/dbd_mysql.c src/dbdrivers/dbd_mysql.h src/dbdrivers/dbd_pgsql.c src/dbdrivers/dbd_pgsql.h src/dbdrivers/dbd_redis.c src/dbdrivers/dbd_redis.h src/dbdrivers/dbd_sqlite.c src/dbdrivers/dbd_sqlite.h src/dbdrivers/dbdriver.c src/dbdrivers/dbdriver.h src/apputils.c src/apputils.h src/dtls_listener.c src/dtls_listener.h src/hiredis_libevent2.c src/hiredis_libevent2.h src/http_server.c src/http_server.h src/libtelnet.c src/libtelnet.h src/mainrelay.h src/ns_ioalib_impl.h src/ns_sm.h src/ns_turn_allocation.c src/ns_turn_allocation.h src/ns_turn_msg_defs.h src/ns_turn_ioaddr.c src/ns_turn_ioaddr.h src/ns_turn_ioalib.h src/ns_turn_khash.h src/ns_turn_maps.c src/ns_turn_maps.h src/ns_turn_maps_rtcp.c src/ns_turn_maps_rtcp.h src/ns_turn_msg.c src/ns_turn_msg.h src/ns_turn_msg_addr.c src/ns_turn_msg_addr.h src/ns_turn_msg_defs.h src/ns_turn_msg_defs_experimental.h src/ns_turn_openssl.h src/http_server.c src/http_server.h src/ns_turn_utils.c src/apputils.h src/stun_buffer.c src/stun_buffer.h src/turn_admin_server.c src/turn_admin_server.h src/turn_ports.c src/turn_ports.h src/userdb.c src/userdb.h src/ns_turn_defs.h src/ns_sm.h src/ns_turn_server.c src/ns_turn_server.h src/ns_turn_session.h src/tls_listener.c src/tls_listener.h src/ns_ioalib_engine_impl.c src/netengine.c)
#TARGET_LINK_LIBRARIES(mainrelay libhiredis.so.0.10)